<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>Bulk Repository Access API</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body id="bulk" class="article">
<div id="header">
<h1>Bulk Repository Access API</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The bulk API <strong>version 2025.1</strong> is used to store and retrieve nodes in batches at the moment of invocation.<sup class="footnote" id="_footnote_org25">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>
It is intended for CRUD operations on (larger) sets of nodes.
it is <strong>not</strong> intended as a delta-oriented API that takes "modification commands" as arguments.</p>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_conventions_used_in_this_document">Conventions used in this document</a></li>
<li><a href="#use-cases">Use Cases</a></li>
<li><a href="#validity">Validity assumptions</a></li>
<li><a href="#out-of-scope">Out of scope</a></li>
<li><a href="#deleted-nodes">Deleted nodes</a></li>
<li><a href="#client-ids">Client ids</a></li>
<li><a href="#unknown-node-ids">Unknown node ids</a></li>
<li><a href="#responses">Responses</a></li>
<li><a href="#parameter-types">Parameter types</a></li>
<li><a href="#apis">Commands</a>
<ul class="sectlevel2">
<li><a href="#partitions">listPartitions: List available partitions</a></li>
<li><a href="#createPartitions">createPartitions: Create new partitions</a></li>
<li><a href="#deletePartitions">deletePartitions: Delete partitions and all their contents</a></li>
<li><a href="#retrieve">retrieve: Get nodes from repository</a></li>
<li><a href="#store">store: Put nodes into repository</a></li>
<li><a href="#ids">ids: Get available ids</a></li>
</ul>
</li>
<li><a href="#crud-mapping">Mapping CRUD operations</a></li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="_conventions_used_in_this_document">Conventions used in this document</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>ALL-CAPS key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="https://datatracker.ietf.org/doc/html/bcp14">BCP14</a> (<a href="https://datatracker.ietf.org/doc/html/rfc2119">RFC2119</a>, <a href="https://datatracker.ietf.org/doc/html/rfc8174">RFC8174</a>) when, and only when, they appear in all capitals, as shown here.</p>
</li>
<li>
<p>Footnotes refer to more discussions and rationale, but are non-normative.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="use-cases">Use Cases</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We describe the use cases from a client&#8217;s perspective.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"I&#8217;m starting up, which partitions do you know about?", i.e. <a href="#partitions">list possible contents</a>.</p>
</li>
<li>
<p>"Let&#8217;s have a new slate, add a new partition", i.e. <a href="#createPartitions">partition creation</a>.</p>
</li>
<li>
<p>"This part is not needed any more, remove the partition", i.e. <a href="#deletePartitions">partition deletion</a>.</p>
</li>
<li>
<p>"Give me the whole subtree under this node", i.e. actual <a href="#retrieve">bulk data retrieval</a></p>
</li>
<li>
<p>"Here is a node forest, store it as I hand it to you", i.e. actual <a href="#store">bulk data storage</a>.</p>
<div class="ulist">
<ul>
<li>
<p>Sub-case with same behavior: "I&#8217;m a very simple client who only knows load and save (like a file), so whatever I send you is the truth", i.e. <a href="#store">click-save-button</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>"I&#8217;m starting up, get me the current partition contents", i.e. <a href="#retrieve">initial load</a>.</p>
</li>
<li>
<p>"I want to create a guaranteed new node, which id to use?", i.e. retrieval of <a href="#ids">unused ids</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="validity">Validity assumptions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We don&#8217;t need to know anything about languages for this API.<sup class="footnote" id="_footnote_org203">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup></p>
</div>
<div class="paragraph">
<p>We never sent partial nodes or features.<sup class="footnote" id="_footnote_org211">[<a id="_footnoteref_3" class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup>
Thus, we can only update or receive a complete node with all its features.
We cannot update only some of the features, or part of a feature (e.g. start of a string property value).</p>
</div>
<div class="paragraph">
<p>We assume transactional semantics for each modifying command.<sup class="footnote" id="_footnote_org229">[<a id="_footnoteref_4" class="footnote" href="#_footnotedef_4" title="View footnote.">4</a>]</sup>
A command either succeeds completely, or fails completely and does not change the repository&#8217;s content.</p>
</div>
<div class="paragraph">
<p>We do support invalid models w.r.t.<sup class="footnote" id="_footnote_org226">[<a id="_footnoteref_5" class="footnote" href="#_footnotedef_5" title="View footnote.">5</a>]</sup></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Violations of metamodel constraints, e.g. whether a Concept instance without parent is a partition, a feature instance can be part of its node instance, or a node mentioned as annotation is an Annotation instance.</p>
</li>
<li>
<p>Unresolvable references, i.e. a <a href="../serialization/serialization.html#reference">reference target node id</a> unknown to the repository.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We enforce conformance to<sup class="footnote" id="_footnote_org223">[<a id="_footnoteref_6" class="footnote" href="#_footnotedef_6" title="View footnote.">6</a>]</sup></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tree structure (i.e. at most one parent for each node)</p>
</li>
<li>
<p>Symmetry between containment/annotation and parent</p>
</li>
<li>
<p>No unresolvable containment/annotation ids</p>
</li>
<li>
<p>No unresolvable parent ids</p>
</li>
<li>
<p>A child node id MUST appear exactly once in all of its parent&#8217;s containments</p>
</li>
<li>
<p>An annotation node id MUST appear exactly once in all of its parent&#8217;s annotations</p>
</li>
<li>
<p>Every node MUST (directly or indirectly) be contained in a partition, except partitions themselves</p>
</li>
<li>
<p>Partitions MUST NOT have a parent</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="out-of-scope">Out of scope</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We assume mapping API is separate from bulk API<sup class="footnote" id="_footnote_org94">[<a id="_footnoteref_7" class="footnote" href="#_footnotedef_7" title="View footnote.">7</a>]</sup>.</p>
</div>
<div class="paragraph">
<p>For now, we do not support paging, as paging tree nodes is non-trivial.<sup class="footnote" id="_footnote_org204">[<a id="_footnoteref_8" class="footnote" href="#_footnotedef_8" title="View footnote.">8</a>]</sup></p>
</div>
<div class="paragraph">
<p>For now, we don&#8217;t include any specific protections agains denial-of-service attacks.<sup class="footnote" id="_footnote_org237">[<a id="_footnoteref_9" class="footnote" href="#_footnotedef_9" title="View footnote.">9</a>]</sup></p>
</div>
<div class="paragraph">
<p>We don&#8217;t describe the binding to any specific protocol (e.g. HTTP) as part of this specification; We only describe the semantics.<sup class="footnote" id="_footnote_org148">[<a id="_footnoteref_10" class="footnote" href="#_footnotedef_10" title="View footnote.">10</a>]</sup></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deleted-nodes">Deleted nodes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We don&#8217;t have an explicit delete command for non-root nodes.<sup class="footnote" id="_footnote_org221">[<a id="_footnoteref_11" class="footnote" href="#_footnotedef_11" title="View footnote.">11</a>]</sup>
We delete non-root nodes indirectly by sending their parent without the deleted node mentioned as child.
We can <a href="#deletePartitions">deletePartitions</a> via explicit command.</p>
</div>
<div class="paragraph">
<p>We don&#8217;t support <a id="orphan"></a><em>orphans</em> for now.
They are immediately deleted.<sup class="footnote" id="_footnote_org219">[<a id="_footnoteref_12" class="footnote" href="#_footnotedef_12" title="View footnote.">12</a>]</sup></p>
</div>
<div class="paragraph">
<p>Deleted nodes don&#8217;t exist anymore in the repository from the client&#8217;s point of view.
They might still exist in other contexts (e.g. another branch), or physically within the repository for internal reasons (e.g. storage optimization, concurrent editing support).
A deleted node MUST NOT appear in any responses according to this API.<sup class="footnote" id="_footnote_org220">[<a id="_footnoteref_13" class="footnote" href="#_footnotedef_13" title="View footnote.">13</a>]</sup></p>
</div>
<div class="paragraph">
<p>A repository MAY consider the deleted node&#8217;s id to be <em>unused</em>, and thus allow to re-use it.
A repository also MAY disallow re-using previously deleted node ids.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="client-ids">Client ids</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each <a href="../reference-architecture/reference-architecture.html#client">client</a> MUST  provide a unique <em>client id</em> when connecting to the repository.<sup class="footnote" id="_footnote_org241">[<a id="_footnoteref_14" class="footnote" href="#_footnotedef_14" title="View footnote.">14</a>]</sup>
The client id is an <a href="../metametamodel/metametamodel.html#identifiers">identifier</a>-compatible string.
A client MAY connect more than once to the same repository at the same time with the same client id.
It is out of scope of LionWeb to guarantee the uniqueness of the client id.
The repository does not apply any uniqueness checks.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="unknown-node-ids">Unknown node ids</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An <em>unknown node id</em> is a node id that&#8217;s not the node id of any node present in the repository.
An unknown node id can be present as a reference target (as we support unresolvable references).</p>
</div>
<div class="paragraph">
<p>How to handle unknown node ids in <a href="#createPartitions">createPartitions</a> and <a href="#store">store</a> commands?<sup class="footnoteref">[<a class="footnote" href="#_footnotedef_7" title="View footnote.">7</a>]</sup><sup class="footnote" id="_footnote_org70">[<a id="_footnoteref_15" class="footnote" href="#_footnotedef_15" title="View footnote.">15</a>]</sup></p>
</div>
<div class="paragraph">
<p>Scenarios:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 36.3636%;">
<col style="width: 9.0909%;">
<col style="width: 18.1818%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 18.1819%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Description: Node id &#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Valid format</th>
<th class="tableblock halign-left valign-top">Format fits repo</th>
<th class="tableblock halign-left valign-top">Present in repo</th>
<th class="tableblock halign-left valign-top">Reserved</th>
<th class="tableblock halign-left valign-top">Repo action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">already present in repository</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔️</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔️ (repo accepted it)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔️</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔️</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">error (<a href="#createPartitions">createPartitions</a>) / update node (<a href="#store">store</a>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#ids">requested</a> by this client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔️</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔️ (repo handed it out)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔️</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create node</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#ids">requested</a> by other client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔️</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔️ (repo handed it out)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔️</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">error</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">used previously by deleted node, repo disallows re-use</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔️</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔️ (repo handed it out)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔️</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">error</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">used previously by deleted node, repo supports re-use</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔️</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔️ (repo handed it out)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create node</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">invented by this client, requested by other client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔️</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔️ (repo handed it out)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔️</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">error</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">invented by client, matches repo format<br>
Example: <code>123</code> for repo with internal long ids</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔️</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔️</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create node</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">invented by client, violates repo format<br>
Example: <code>ab123</code> for repo with internal long ids</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">✔️</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌️</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create node</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">invented by client, invalid <br>
Example: <code>he!!o</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌️️</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌️</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">❌</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">error</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="responses">Responses</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The repository</p>
</div>
<div class="paragraph">
<p>Besides the main response, the repository can reply each command with zero or more additional</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="parameter-types">Parameter types</h2>
<div class="sectionbody">
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<a id="chunkType"></a>chunk
</td>
<td class="hdlist2">
<p>A <a href="../serialization/serialization.html#SerializationChunk">SerializationChunk</a> of nodes.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="nodeIdType"></a>nodeId
</td>
<td class="hdlist2">
<p>A <a href="../metametamodel/metametamodel.html#identifiers">valid node id</a>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="integerType"></a>integer
</td>
<td class="hdlist2">
<p>An integer.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="commandIdType"></a>commandId
</td>
<td class="hdlist2">
<p>Each <em>modifying</em> command MUST contain a <em><a id="commandId"></a>command id</em>.<sup class="footnote" id="_footnote_org313">[<a id="_footnoteref_16" class="footnote" href="#_footnotedef_16" title="View footnote.">16</a>]</sup>
It has the same format as <a href="../metametamodel/metametamodel.html#identifiers">node ids</a> and must be unique for all changes of this client.</p>
<div class="paragraph">
<p>Modifying commands are <a href="#createPartitions">createPartitions</a>, <a href="#deletePartitions">deletePartitions</a>, and <a href="#store">store</a>.</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="successType"></a>success
</td>
<td class="hdlist2">
<p>A boolean flag signalling <em>success</em> or <em>failure</em> with each response.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="messagesType"></a>message
</td>
<td class="hdlist2">
<p>Optionally empty<sup class="footnote" id="_footnote_org402">[<a id="_footnoteref_17" class="footnote" href="#_footnotedef_17" title="View footnote.">17</a>]</sup> list of <a id="Response.messages"></a> messages in either request or response.<sup class="footnote" id="_footnote_org236">[<a id="_footnoteref_18" class="footnote" href="#_footnotedef_18" title="View footnote.">18</a>]</sup><sup class="footnote" id="_footnote_org375">[<a id="_footnoteref_19" class="footnote" href="#_footnotedef_19" title="View footnote.">19</a>]</sup>
Each message MUST have the following properties:</p>
<div class="ulist">
<ul>
<li>
<p><a id="message.kind"></a><code>kind</code> is an <a href="../metametamodel/metametamodel.html#identifiers">identifier</a>-compatible string identifying the message type.
Some message kinds are pre-defined in this specification.
A client or repository MAY reply with other, additional message kinds.</p>
</li>
<li>
<p><a id="message.message"></a><code>message</code> is a human-readable string describing the message.</p>
</li>
<li>
<p><a id="message.data"></a><code>data</code> is a flat map with arbitrary keys and values.
All values MUST be strings, the keys MUST be <a href="../metametamodel/metametamodel.html#identifiers">identifier</a>-compatible.
A <em>kind</em> might imply presence of specific keys in <code>data</code>.</p>
</li>
</ul>
</div>
<table id="message-kinds-global" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Message kinds for all commands</caption>
<colgroup>
<col style="width: 21.4285%;">
<col style="width: 21.4285%;">
<col style="width: 7.1428%;">
<col style="width: 50.0002%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Kind</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Success</th>
<th class="tableblock halign-left valign-top">Implied data</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">`` <mark>TODO</mark></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invalid node id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>invalidNodeId</code>
</td>
<td class="hdlist2">
<p>Id of non-partition node.</p>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">`` <mark>TODO</mark></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Node with same id sent more than once</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><mark>TODO</mark></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">`` <mark>TODO</mark></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invalid tree due to concurrent update<sup class="footnote" id="_footnote_org238">[<a id="_footnoteref_20" class="footnote" href="#_footnotedef_20" title="View footnote.">20</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><mark>TODO</mark></p>
</div></div></td>
</tr>
</tbody>
</table>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="apis">Commands</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="partitions">listPartitions: List available partitions</h3>
<div class="paragraph">
<p>Lists all non-language partitions accessible in the repository.</p>
</div>
<div class="paragraph">
<p>Calling this command MUST NOT change repository contents.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
We might add filter capabilities in the future.
</td>
</tr>
</table>
</div>
<div class="hdlist">
<div class="title">Request parameters</div>
<table>
<tr>
<td class="hdlist1">
<a id="listPartitions.commandId"></a>commandId
</td>
<td class="hdlist2">
<p><a href="#commandIdType">commandId</a>? Optional as this is not a modifying command.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="listPartitions.requestMessages"></a>messages
</td>
<td class="hdlist2">
<p><a href="#messagesType">message</a>[]</p>
</td>
</tr>
</table>
</div>
<div class="hdlist">
<div class="title">Response parameters</div>
<table>
<tr>
<td class="hdlist1">
<a id="listPartitions.chunk"></a>chunk
</td>
<td class="hdlist2">
<p><a href="#chunkType">chunk</a> with all accessible <a href="../metametamodel/metametamodel.html#partition">Partitions</a> in the Repository.
The partitions are sent as complete nodes.<sup class="footnote" id="_footnote_org202">[<a id="_footnoteref_21" class="footnote" href="#_footnotedef_21" title="View footnote.">21</a>]</sup>
Does NOT include any children or annotations of the root partition nodes.
Does NOT include <a href="../metametamodel/metametamodel.html#Language">Languages</a> or partition children/annotations.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="listPartitions.success"></a>success
</td>
<td class="hdlist2">
<p><a href="#successType">success</a></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="listPartitions.responseMessages"></a>messages
</td>
<td class="hdlist2">
<p><a href="#messagesType">message</a>[] with no special message kinds.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="createPartitions">createPartitions: Create new partitions</h3>
<div class="paragraph">
<p>Creates new partitions in the repository.<sup class="footnote" id="_footnote_org216">[<a id="_footnoteref_22" class="footnote" href="#_footnotedef_22" title="View footnote.">22</a>]</sup></p>
</div>
<div class="paragraph">
<p>Each sent node with no parent node id is its own partition.
All other nodes MUST NOT exist in the repository, and they MUST be descendants of on of the partition nodes.
We cannot use <a href="#store.semantics">move semantics</a>.
We MAY reference nodes already existing in the repository.<sup class="footnote" id="_footnote_org369">[<a id="_footnoteref_23" class="footnote" href="#_footnotedef_23" title="View footnote.">23</a>]</sup></p>
</div>
<div class="paragraph">
<p>Nodes MUST use <a href="#unknown-node-ids">Unknown node ids</a>.</p>
</div>
<div class="hdlist">
<div class="title">Request parameters</div>
<table>
<tr>
<td class="hdlist1">
<a id="createPartitions.nodes"></a> nodes
</td>
<td class="hdlist2">
<p><a href="#chunkType">chunk</a> containing all nodes we want to add as new partitions.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="createPartitions.commandId"></a>commandId
</td>
<td class="hdlist2">
<p><a href="#commandIdType">commandId</a></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="createPartitions.requestMessages"></a>messages
</td>
<td class="hdlist2">
<p><a href="#messagesType">message</a>[]</p>
</td>
</tr>
</table>
</div>
<div class="hdlist">
<div class="title">Response parameters</div>
<table>
<tr>
<td class="hdlist1">
<a id="createPartitions.success"></a>success
</td>
<td class="hdlist2">
<p><a href="#successType">success</a></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="createPartitions.responseMessages"></a>messages
</td>
<td class="hdlist2">
<p><a href="#messagesType">message</a>[]</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21.4285%;">
<col style="width: 21.4285%;">
<col style="width: 7.1428%;">
<col style="width: 50.0002%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Kind</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Success</th>
<th class="tableblock halign-left valign-top">Implied data</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><code>PartitionHasParent</code></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Partition node states parent id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>nodeId</code>
</td>
<td class="hdlist2">
<p>node id of requested partition that has a parent.</p>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><code>PartitionAlreadyExists</code></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Partition node id already exists</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>nodeId</code>
</td>
<td class="hdlist2">
<p>Id of already existing node.</p>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">`` <mark>TODO</mark></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Partition node id not reserved for this client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><mark>TODO</mark></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><code>PartitionHasChildren</code>
<code>PartitionHasAnnotations</code> <mark>TODO</mark></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Partition node lists contained or annotated nodes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>nodeId</code>
</td>
<td class="hdlist2">
<p>node id of requested partition that has children or annotations.</p>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><code>EmptyChunk</code></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empty Request</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>None</p>
</div></div></td>
</tr>
</tbody>
</table>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="deletePartitions">deletePartitions: Delete partitions and all their contents</h3>
<div class="paragraph">
<p>Deletes all mentioned partitions, including all (transitive) annotations and children.</p>
</div>
<div class="paragraph">
<p>All mentioned node ids MUST be ids of partition nodes.</p>
</div>
<div class="paragraph">
<p>All (transitive) annotations and children become <a href="#orphan">orphans</a>.</p>
</div>
<div class="hdlist">
<div class="title">Request parameters</div>
<table>
<tr>
<td class="hdlist1">
<a id="deletePartitions.nodeIds"></a>nodeIds
</td>
<td class="hdlist2">
<p><a href="#nodeIdType">nodeId</a>[] List of node ids to delete.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="deletePartitions.commandId"></a>commandId
</td>
<td class="hdlist2">
<p><a href="#commandIdType">commandId</a></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="deletePartitions.requestMessages"></a>messages
</td>
<td class="hdlist2">
<p><a href="#messagesType">message</a>[]</p>
</td>
</tr>
</table>
</div>
<div class="hdlist">
<div class="title">Response parameters</div>
<table>
<tr>
<td class="hdlist1">
<a id="deletePartitions.success"></a>success
</td>
<td class="hdlist2">
<p><a href="#successType">success</a></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="deletePartitions.responseMessages"></a>messages
</td>
<td class="hdlist2">
<p><a href="#messagesType">message</a>[]</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21.4285%;">
<col style="width: 21.4285%;">
<col style="width: 7.1428%;">
<col style="width: 50.0002%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Kind</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Success</th>
<th class="tableblock halign-left valign-top">Implied data</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><code>NodeIsNotPartition</code></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Node with that id is not a partition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>nodeId</code>
</td>
<td class="hdlist2">
<p>Id of non-partition node.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>parentNodeId</code>
</td>
<td class="hdlist2">
<p>Id of the parent node.</p>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">`` <mark>TODO</mark></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Node with that id does not exist</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><mark>TODO</mark></p>
</div></div></td>
</tr>
</tbody>
</table>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="retrieve">retrieve: Get nodes from repository</h3>
<div class="paragraph">
<p>Retrieves subtrees nested in the listed node ids.<sup class="footnote" id="_footnote_org201">[<a id="_footnoteref_24" class="footnote" href="#_footnotedef_24" title="View footnote.">24</a>]</sup></p>
</div>
<div class="paragraph">
<p>Calling this command MUST NOT change repository contents.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
We might add advanced filtering capabilities in the future, or introduce an additional querying API.
</td>
</tr>
</table>
</div>
<div class="hdlist">
<div class="title">Request parameters</div>
<table>
<tr>
<td class="hdlist1">
<a id="retrieve.nodeIds"></a>nodeIds
</td>
<td class="hdlist2">
<p><a href="#nodeIdType">nodeId</a>[] List of node ids we want to retrieve from the repository.
Can be partition node ids and/or nested node ids.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="retrieve.depthLimit"></a>depthLimit
</td>
<td class="hdlist2">
<p><a href="#integerType">integer</a>? Limit the depth of retrieved subtrees.
Optional parameter, defaults to <em>infinite</em>.
If present, MUST be an integer &gt;= 0, with</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>0 meaning "return only the nodes with ids listed in <a href="#retrieve.nodeIds"><code>nodeIds</code></a> parameter",</p>
</li>
<li>
<p>1 meaning "return the nodes with id listed in the <a href="#retrieve.nodeIds"><code>nodeIds</code></a> parameter and their direct children/annotations",</p>
</li>
<li>
<p>2 meaning "return the nodes with id listed in the <a href="#retrieve.nodeIds"><code>nodeIds</code></a> parameter, their direct children/annotations, and the direct children/annotations of these",</p>
</li>
<li>
<p>etc.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
There&#8217;s no <em>magic value</em> of <a href="#retrieve.depthLimit"><code>depthLimit</code></a> to express <em>infinite</em> depth.
We need to omit the parameter if we don&#8217;t want to limit the depth.
</td>
</tr>
</table>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="retrieve.commandId"></a>commandId
</td>
<td class="hdlist2">
<p><a href="#commandIdType">commandId</a>? Optional as this is not a modifying command.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="retrieve.requestMessages"></a>messages
</td>
<td class="hdlist2">
<p><a href="#messagesType">message</a>[]</p>
</td>
</tr>
</table>
</div>
<div class="hdlist">
<div class="title">Response parameters</div>
<table>
<tr>
<td class="hdlist1">
<a id="retrieve.chunk"></a>chunk
</td>
<td class="hdlist2">
<p><a href="#chunkType">chunk</a> containing all nodes according to <a href="#retrieve.nodeIds"><code>nodeIds</code></a> and <a href="#retrieve.depthLimit"><code>depthLimit</code></a> parameters.
Does NOT include the definition of <a href="../serialization/serialization.html#UsedLanguage">UsedLanguages</a>, only their <a href="../serialization/serialization.html#MetaPointer">MetaPointers</a>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="retrieve.success"></a>success
</td>
<td class="hdlist2">
<p><a href="#successType">success</a></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="retrieve.responseMessages"></a>messages
</td>
<td class="hdlist2">
<p><a href="#messagesType">message</a>[]</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21.4285%;">
<col style="width: 21.4285%;">
<col style="width: 7.1428%;">
<col style="width: 50.0002%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Kind</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Success</th>
<th class="tableblock halign-left valign-top">Implied data</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><code>IdNotFound</code></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Node with requested id does not exist</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>nodeId</code>
</td>
<td class="hdlist2">
<p>Id of non-existent node</p>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><code>EmptyIdList</code></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empty id list</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>None</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><code>IdsIncorrect</code></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invalid ids parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>nodeIds</code>
</td>
<td class="hdlist2">
<p>The invalid <code>nodeIds</code> parameter</p>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><code>DepthLimitIncorrect</code></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invalid depthLimit parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>depthLimit</code>
</td>
<td class="hdlist2">
<p>The invalid <code>depthLimit</code> parameter.</p>
</td>
</tr>
</table>
</div></div></td>
</tr>
</tbody>
</table>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="store">store: Put nodes into repository</h3>
<div class="paragraph">
<p>Creates new nodes, or updates existing nodes in the repository.</p>
</div>
<div class="paragraph">
<p>We always process one node in its entirety, i.e. we cannot update parts of the node with this command.<sup class="footnoteref">[<a class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup></p>
</div>
<div class="paragraph">
<p>A node id referenced as parent, containment, reference, or annotation <em>can</em> be mentioned in the same request, but <em>can</em> be omitted if a node with that id already exists in the repository.
This way, we can move subtrees and add arbitrary references without sending unchanged nodes.</p>
</div>
<div class="paragraph">
<p>We consider that node to be <em>new</em> if it has an <a href="#unknown-node-ids">unknown node id</a>.
Otherwise, we consider the node to be <em>updated</em> (i.e. if a node with the same id already exists in the repository).</p>
</div>
<div class="paragraph">
<p>We do not support different modes.<sup class="footnote" id="_footnote_org230">[<a id="_footnoteref_25" class="footnote" href="#_footnotedef_25" title="View footnote.">25</a>]</sup></p>
</div>
<div id="store.semantics" class="paragraph">
<div class="title">Semantics</div>
<p>After completing this call, all sent nodes MUST have exactly the sent contents in the repository.
We must send containments/annotations from the parent&#8217;s view, because we need to know the containment and index of the contained node/annotation within its parent.</p>
</div>
<div class="paragraph">
<p>If we move a contained/annotation node <code>C</code> from its previous parent <code>A</code> to its new parent <code>B</code>, we MUST send <code>B</code>, and MAY omit <code>A</code>.<sup class="footnote" id="_footnote_org227">[<a id="_footnoteref_26" class="footnote" href="#_footnotedef_26" title="View footnote.">26</a>]</sup>
This means we can have implicit changes in <code>A</code>.</p>
</div>
<div class="paragraph">
<p>The whole call fails, without any changes to the repository, if it would lead to a <a href="#validity">malformed model</a>.<sup class="footnoteref">[<a class="footnote" href="#_footnotedef_6" title="View footnote.">6</a>]</sup>
The repository MUST NOT validate the metamodel constraints of the sent nodes.<sup class="footnoteref">[<a class="footnote" href="#_footnotedef_5" title="View footnote.">5</a>]</sup></p>
</div>
<div class="paragraph">
<p>The repository MUST support changing <a href="../serialization/serialization.html#meta-pointer">meta-pointers</a>, e.g.  a node&#8217;s <code>classifier.language</code>, a property&#8217;s <code>property.version</code> or an enumeration literal&#8217;s <code>key</code>.<sup class="footnote" id="_footnote_org69">[<a id="_footnoteref_27" class="footnote" href="#_footnotedef_27" title="View footnote.">27</a>]</sup></p>
</div>
<div class="hdlist">
<div class="title">Request parameters</div>
<table>
<tr>
<td class="hdlist1">
<a id="store.nodes"></a>nodes
</td>
<td class="hdlist2">
<p><a href="#chunkType">chunk</a> containing all nodes to store to the repository.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="store.commandId"></a>commandId
</td>
<td class="hdlist2">
<p><a href="#commandIdType">commandId</a></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="store.requestMessages"></a>messages
</td>
<td class="hdlist2">
<p><a href="#messagesType">message</a>[]</p>
</td>
</tr>
</table>
</div>
<div class="hdlist">
<div class="title">Response parameters</div>
<table>
<tr>
<td class="hdlist1">
<a id="store.success"></a>success
</td>
<td class="hdlist2">
<p><a href="#successType">success</a></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="store.responseMessages"></a>messages
</td>
<td class="hdlist2">
<p><a href="#messagesType">message</a>[]</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 21.4285%;">
<col style="width: 21.4285%;">
<col style="width: 7.1428%;">
<col style="width: 50.0002%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Kind</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Success</th>
<th class="tableblock halign-left valign-top">Implied data</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><code>NullChunk</code></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chunk missing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>None</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">`` <mark>TODO</mark></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Node id mentioned as annotation/child in more than one parent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><mark>TODO</mark></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">`` <mark>TODO</mark></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Move would create loop in tree</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><mark>TODO</mark></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><code>ParentMissing</code></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parent / child / annotation node id unknown</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>nodeId</code>
</td>
<td class="hdlist2">
<p>Id of node that doesn&#8217;t have a parent.</p>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">`` <mark>TODO</mark></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parent doesn&#8217;t match child/annotation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><mark>TODO</mark></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">`` <mark>TODO</mark></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">New node id not reserved for this client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><mark>TODO</mark></p>
</div></div></td>
</tr>
</tbody>
</table>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ids">ids: Get available ids</h3>
<div class="paragraph">
<p>Provides unused <a href="../metametamodel/metametamodel.html#identifiers">valid node ids</a>.</p>
</div>
<div class="paragraph">
<p>The repository</p>
</div>
<div class="ulist">
<ul>
<li>
<p>MUST NOT hand out the same unused ids to any other client.</p>
</li>
<li>
<p>MAY hand out the same unused ids to the same client more than once.</p>
</li>
<li>
<p>MUST NOT contain any node with any of the provided ids.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The ids MUST exclude the <a href="../metametamodel/metametamodel.html#predefined-builtins-keys">built-in ids</a>.</p>
</div>
<div class="paragraph">
<p>Calling this command MUST NOT change repository contents themselves (besides the internal knowledge of reserved ids).</p>
</div>
<div class="paragraph">
<p>We don&#8217;t assume leases, i.e. ids handed out to one client are "owned" by that client forever.
Rationale: Otherwise, the repository must track sessions, and run housekeeping on leases.
This would exclude simple repository implementations.</p>
</div>
<div class="paragraph">
<p>We assume infinite id space.</p>
</div>
<div class="hdlist">
<div class="title">Request parameters</div>
<table>
<tr>
<td class="hdlist1">
<a id="ids.count"></a>count
</td>
<td class="hdlist2">
<p><a href="#integerType">integer</a> Number of ids requested.
The repository MUST return between one (inclusive) and <code>count</code> (inclusive) ids.
It MAY return less than <code>count</code> ids.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="ids.commandId"></a>commandId
</td>
<td class="hdlist2">
<p><a href="#commandIdType">commandId</a>? Optional as this is not a modifying command.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="ids.requestMessages"></a>messages
</td>
<td class="hdlist2">
<p><a href="#messagesType">message</a>[]</p>
</td>
</tr>
</table>
</div>
<div class="hdlist">
<div class="title">Response parameters</div>
<table>
<tr>
<td class="hdlist1">
<a id="ids.ids"></a>ids
</td>
<td class="hdlist2">
<p><a href="#nodeIdType">nodeId</a>[] List of ids guaranteed to be free.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="ids.success"></a>success
</td>
<td class="hdlist2">
<p><a href="#successType">success</a></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a id="ids.responseMessages"></a>messages
</td>
<td class="hdlist2">
<p><a href="#messagesType">message</a>[] with no special message kinds.</p>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="crud-mapping">Mapping CRUD operations</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">list</dt>
<dd>
<p><a href="#partitions">listPartitions</a> for partitions, <a href="#retrieve">retrieve</a> for descendants.</p>
</dd>
<dt class="hdlist1">read</dt>
<dd>
<p><a href="#retrieve">retrieve call</a> with requested node ids (both partitions and other nodes).</p>
</dd>
<dt class="hdlist1">create</dt>
<dd>
<p><a href="#createPartitions">createPartitions</a> for partitions, <a href="#store">store call</a> that sends a node with a <a href="#ids"><em>new id</em></a>, including all its features.</p>
</dd>
<dt class="hdlist1">update</dt>
<dd>
<p><a href="#store">store call</a> that sends a node (both partitions and other nodes) with an <em>existing id</em>, including all its features (both updated and unchanged).</p>
</dd>
<dt class="hdlist1">delete</dt>
<dd>
<p><a href="#deletePartitions">deletePartitions</a> for partitions (including all descendants), for others <a href="#store">store</a> of the parent node without mentioning the deleted node.</p>
</dd>
<dt class="hdlist1">move</dt>
<dd>
<p>Assume we want to move node <code>N</code> from its current parent <code>S</code> to its new parent <code>T</code>.</p>
<div class="paragraph">
<p><a href="#store">store call</a> that sends <code>T</code> with all its features, including <code>N</code> in the children.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
We cannot move partitions, as we cannot nest them.<sup class="footnote" id="_footnote_org29">[<a id="_footnoteref_28" class="footnote" href="#_footnotedef_28" title="View footnote.">28</a>]</sup>
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. <a href="https://github.com/LionWeb-io/specification/issues/25">Repo API: Bulk read/write #25</a>
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. <a href="https://github.com/LionWeb-io/specification/issues/203">How to separate between simple and advanced Bulk API? #203</a>
</div>
<div class="footnote" id="_footnotedef_3">
<a href="#_footnoteref_3">3</a>. <a href="https://github.com/LionWeb-io/specification/issues/211">We always transmit complete nodes in bulk API #211</a>
</div>
<div class="footnote" id="_footnotedef_4">
<a href="#_footnoteref_4">4</a>. <a href="https://github.com/LionWeb-io/specification/issues/229">Bulk API assumes transactional semantics for changing operations #229</a>
</div>
<div class="footnote" id="_footnotedef_5">
<a href="#_footnoteref_5">5</a>. <a href="https://github.com/LionWeb-io/specification/issues/226">Does bulk API validate against languages? #226</a>
</div>
<div class="footnote" id="_footnotedef_6">
<a href="#_footnoteref_6">6</a>. <a href="https://github.com/LionWeb-io/specification/issues/223">Which kinds of invalid nodes does Bulk API accept? #223</a>
</div>
<div class="footnote" id="_footnotedef_7">
<a href="#_footnoteref_7">7</a>. <a href="https://github.com/LionWeb-io/specification/issues/94">Provide id mapping API #94</a>
</div>
<div class="footnote" id="_footnotedef_8">
<a href="#_footnoteref_8">8</a>. <a href="https://github.com/LionWeb-io/specification/issues/204">Do we need a paging functionality in bulk API? #204</a>
</div>
<div class="footnote" id="_footnotedef_9">
<a href="#_footnoteref_9">9</a>. <a href="https://github.com/LionWeb-io/specification/issues/237">Denial-of-service protection is out of scope (at least for now) #237</a>
</div>
<div class="footnote" id="_footnotedef_10">
<a href="#_footnoteref_10">10</a>. <a href="https://github.com/LionWeb-io/specification/issues/148">Level of detail on API specifications #148</a>
</div>
<div class="footnote" id="_footnotedef_11">
<a href="#_footnoteref_11">11</a>. <a href="https://github.com/LionWeb-io/specification/issues/221">Explicit delete operation in bulk API? #221</a>
</div>
<div class="footnote" id="_footnotedef_12">
<a href="#_footnoteref_12">12</a>. <a href="https://github.com/LionWeb-io/specification/issues/219">Optionally support orphans in repository #219</a>
</div>
<div class="footnote" id="_footnotedef_13">
<a href="#_footnoteref_13">13</a>. <a href="https://github.com/LionWeb-io/specification/issues/220">What does it mean to delete a node #220</a>
</div>
<div class="footnote" id="_footnotedef_14">
<a href="#_footnoteref_14">14</a>. <a href="https://github.com/LionWeb-io/specification/issues/241">A client must identify to repository with unique id #241</a>
</div>
<div class="footnote" id="_footnotedef_15">
<a href="#_footnoteref_15">15</a>. <a href="https://github.com/LionWeb-io/specification/issues/70">Can Repositories have stricter requirements on node IDs than LIonWeb (e.g. only longs)? #70</a>
</div>
<div class="footnote" id="_footnotedef_16">
<a href="#_footnoteref_16">16</a>. <a href="https://github.com/LionWeb-io/specification/issues/313">What&#8217;s the command id of a bulk api store request? #313</a>
</div>
<div class="footnote" id="_footnotedef_17">
<a href="#_footnoteref_17">17</a>. <a href="https://github.com/LionWeb-io/specification/issues/402">Representation of empty protocol messages part of delta messages #402</a>
</div>
<div class="footnote" id="_footnotedef_18">
<a href="#_footnoteref_18">18</a>. <a href="https://github.com/LionWeb-io/specification/issues/236">How to report additional info in bulk API? #236</a>
</div>
<div class="footnote" id="_footnotedef_19">
<a href="#_footnoteref_19">19</a>. <a href="https://github.com/LionWeb-io/specification/issues/375">Shall we have additional data/messages in bulk requests? #375</a>
</div>
<div class="footnote" id="_footnotedef_20">
<a href="#_footnoteref_20">20</a>. <a href="https://github.com/LionWeb-io/specification/issues/238">Report model update issues due to concurrent edits separately? #238</a>
</div>
<div class="footnote" id="_footnotedef_21">
<a href="#_footnoteref_21">21</a>. <a href="https://github.com/LionWeb-io/specification/issues/202">Return whole nodes when querying existing partitions #202</a>
</div>
<div class="footnote" id="_footnotedef_22">
<a href="#_footnoteref_22">22</a>. <a href="https://github.com/LionWeb-io/specification/issues/216">How to create and delete partitions #216</a>
</div>
<div class="footnote" id="_footnotedef_23">
<a href="#_footnoteref_23">23</a>. <a href="https://github.com/LionWeb-io/specification/issues/369">The Add Partition command may only add a single root node #369</a>
</div>
<div class="footnote" id="_footnotedef_24">
<a href="#_footnoteref_24">24</a>. <a href="https://github.com/LionWeb-io/specification/issues/201">Don&#8217;t provide `closure` retrieve mode in simple bulk API #201</a>
</div>
<div class="footnote" id="_footnotedef_25">
<a href="#_footnoteref_25">25</a>. <a href="https://github.com/LionWeb-io/specification/issues/230">Which modes to support in bulk API store? #230</a>
</div>
<div class="footnote" id="_footnotedef_26">
<a href="#_footnoteref_26">26</a>. <a href="https://github.com/LionWeb-io/specification/issues/227">When moving a node, do we need to mention both source and target parent? #227</a>
</div>
<div class="footnote" id="_footnotedef_27">
<a href="#_footnoteref_27">27</a>. <a href="https://github.com/LionWeb-io/specification/issues/69">Node update: do we allow concept change? #69</a>
</div>
<div class="footnote" id="_footnotedef_28">
<a href="#_footnoteref_28">28</a>. <a href="https://github.com/LionWeb-io/specification/issues/29">Repo API: Do we need model partitions? #29</a>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-10-10 16:05:17 UTC
</div>
</div>
</body>
</html>