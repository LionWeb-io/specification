<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.26">
<title>Anatomy of a LionWeb Model</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock pre>code{display:block}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1>Anatomy of a LionWeb Model</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This article walks us through a LionWeb model:
What it is, what&#8217;s inside, how the inside looks, what the contents mean, and why they are that way.
It is meant as an introduction to some of the details of LionWeb.
Our target audience are developers that want to work with LionWeb.
We don&#8217;t assume any prior knowledge of LionWeb; some experience with object-oriented languages, and general modeling ideas, is helpful.</p>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a></li>
<li><a href="#nodes">2. Nodes</a>
<ul class="sectlevel2">
<li><a href="#node-id">2.1. Node id</a></li>
<li><a href="#meta-pointer">2.2. Meta-pointer</a></li>
<li><a href="#_node_classifier">2.3. Node classifier</a></li>
<li><a href="#parent">2.4. Node parent</a></li>
<li><a href="#properties">2.5. Properties</a>
<ul class="sectlevel3">
<li><a href="#primitive-types">2.5.1. Primitive types</a></li>
<li><a href="#enumerations">2.5.2. Enumerations</a></li>
<li><a href="#structured-data-types">2.5.3. Structured data types</a></li>
</ul>
</li>
<li><a href="#containments">2.6. Containments</a></li>
<li><a href="#references">2.7. References</a>
<ul class="sectlevel3">
<li><a href="#resolveInfo">2.7.1. ResolveInfo</a></li>
<li><a href="#_unresolved_references">2.7.2. Unresolved references</a></li>
</ul>
</li>
<li><a href="#_differences_between_containment_and_reference">2.8. Differences between containment and reference</a></li>
<li><a href="#annotations">2.9. Annotation instances</a>
<ul class="sectlevel3">
<li><a href="#annotation-applicable-classifiers">2.9.1. Applicable classifiers</a></li>
</ul>
</li>
<li><a href="#_differences_between_containment_and_annotation_instances">2.10. Differences between containment and annotation instances</a></li>
</ul>
</li>
<li><a href="#builtins">3. Built-in Library</a></li>
<li><a href="#_languages">4. Languages</a>
<ul class="sectlevel2">
<li><a href="#classifiers">4.1. Classifiers</a></li>
<li><a href="#features">4.2. Features</a></li>
<li><a href="#_data_types">4.3. Data types</a></li>
</ul>
</li>
<li><a href="#notation">Appendix A: Notation used in this article and diagrams</a></li>
<li><a href="#language-key">Appendix B: Language key</a></li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The fundamental world view in LionWeb is "everything is a model".
This means we express everything we talk about in the form of models.</p>
</div>
<div class="paragraph">
<p>But what is a model?
STOP&#8201;&#8212;&#8201;don&#8217;t run away!
This question is infamous in the modeling community&#8201;&#8212;&#8201;but we have to answer it given our world view as stated above.
We deliberately don&#8217;t use that term in our specifications, as it&#8217;s so overloaded and ambiguous.
For our purposes, we can always replace "model" with "a bunch of nodes".
Then the question transforms to: What is a node?</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nodes">2. Nodes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A node is the fundamental building block in LionWeb.
It consists of a unique identifier (<strong>id</strong>), a <strong>classifier</strong> to define the nature / type / class of the node, the node&#8217;s <strong>parent</strong> node and lists of <strong>properties</strong>, <strong>containments</strong>, <strong>references</strong>, and <strong>annotation instances</strong>, respectively.
We group a node&#8217;s properties, containments, and references as the <strong>features</strong> of that node.</p>
</div>
<div class="paragraph">
<p><a href="#properties">Properties</a> are simple values like <code>name: String</code>, <code>age: Integer</code> or <code>alive: Boolean</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="nodePropertiesExample.svg" alt="nodePropertiesExample" width="187" height="109">
</div>
<div class="title">Properties examples</div>
</div>
<div class="paragraph">
<p><a href="#containments">Containments</a> are other nodes that this node is composed of; examples would be <code>mainEntrance: Door[1]</code> or <code>corners: Coordinate[0..*]</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="nodeContainmentsExample.svg" alt="nodeContainmentsExample" width="445" height="195">
</div>
<div class="title">Containments examples</div>
</div>
<div class="paragraph">
<p><a href="#references">References</a> are other nodes that this node relates to; examples would be <code>surface: Material[1]</code> or <code>stakeholders: Employee[1..*]</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="nodeReferencesExample.svg" alt="nodeReferencesExample" width="435" height="155">
</div>
<div class="title">References examples</div>
</div>
<div class="paragraph">
<p><a href="#annotations">Annotation instances</a> are other nodes that represent orthogonal concerns of this node; examples include <code>ParsedFromLine</code> or <code>ReviewComment</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="nodeAnnotationsExample.svg" alt="nodeAnnotationsExample" width="959" height="102">
</div>
<div class="title">Annotations examples</div>
</div>
<div class="paragraph">
<p>Let&#8217;s look into each of these in more detail.</p>
</div>
<div class="sect2">
<h3 id="node-id">2.1. Node id</h3>
<div class="paragraph">
<p>The id of a node is a string of arbitrary length, consisting of characters <code>A</code>-<code>Z</code>, <code>a</code>-<code>z</code>, <code>0</code>-<code>9</code>, dash <code>-</code> and underscore <code>_</code>.
It cannot be empty, and it must be unique for all nodes in the model.</p>
</div>
<div class="paragraph">
<p>The valid character set coincides with the output of <em>base64url</em>-encoding.
This comes very handy if we had to derive the node id from some other source, like a binary hash, or a fully qualified name.</p>
</div>
<div class="paragraph">
<p>We chose this character set, as it should be compatible with any run-time environment, and avoid any encoding issues.
We don&#8217;t limit the id&#8217;s length, so any kind of other source can be represented&#8201;&#8212;&#8201;fully qualified names tend to get very long, for example.</p>
</div>
<div class="paragraph">
<p>We assume nodes with equal id string to be identical.</p>
</div>
<div class="paragraph">
<p>Node ids should NOT carry any meaning:
Only because a node id happens to contain the string <code>frontLeftWheel</code>, we should NOT assume its classifier might be <code>Wheel</code>, or its containment might be <code>frontLeft</code>.
These "descriptive" node ids are quite useful to read examples or in tests, as they provide more context.
However, examples and tests are for human consumption&#8201;&#8212;&#8201;real nodes (in their raw form) are not.</p>
</div>
</div>
<div class="sect2">
<h3 id="meta-pointer">2.2. Meta-pointer</h3>
<div class="paragraph">
<p>Before we get to the next part of a node, classifier, we need to discuss <em>meta-pointers</em>.
Any time we refer from an instance model (M1) to its metamodel (M2 a.k.a. <a href="#_languages">language</a>), we use meta-pointers.
They are a triple of {<em>language key</em>, <em>language version</em>, <em>element key</em>}, for example <code>{language=MyLanguage, version=23-alpha, key=MyConcept}</code>.
Both language key and element key use the same character set as <a href="#node-id">node ids</a>, whereas language version can be any non-empty string.</p>
</div>
<div class="paragraph">
<p>We need this triple, because a language can be uniquely identified by its key and version, and the element key must be unique within its language.
With language version we support <em>language evolution</em>, i.e. the fact that real-world languages tend to change over time.</p>
</div>
<div class="paragraph">
<p>We don&#8217;t prescribe anything about language version, as different implementations might use different ways to represent language evolution.
We just assume that equal strings refer to the identical version.</p>
</div>
</div>
<div class="sect2">
<h3 id="_node_classifier">2.3. Node classifier</h3>
<div class="paragraph">
<p>A node&#8217;s classifier is a <a href="#meta-pointer">meta-pointer</a> that defines the node&#8217;s nature, or type or class&#8201;&#8212;&#8201;"what kind of thing is this node?"
A classifier of a node is equivalent to the class of a Java, C#, or TypeScript object.
The <a href="#classifiers">classifier</a> can either be a <em>concrete concept</em> or an <em>annotation</em>. It cannot be an <em>abstract concept</em> or <em>interface</em>, as we cannot instantiate them.</p>
</div>
<div class="paragraph">
<p>A node must conform to its classifier.
This means the node can only have features as described in the node&#8217;s classifier.
<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p>
</div>
</div>
<div class="sect2">
<h3 id="parent">2.4. Node parent</h3>
<div class="paragraph">
<p>The parent of node <code>A</code> is the node <code>B</code> that contains <code>A</code>.
For example, node <code>10</code> of classifier <code>Car</code> might contain node <code>5</code> of classifier <code>PetrolEngine</code>, and node <code>11</code> of classifier <code>SteeringWheel</code>.
Thus, the parent of <code>5</code> is <code>10</code>, and the parent of <code>11</code> is also <code>10</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="carParent.svg" alt="carParent" width="340" height="138">
</div>
<div class="title">Parent example</div>
</div>
<div class="paragraph">
<p>Every node MUST have exactly one parent&#8201;&#8212;&#8201;except for root nodes.
This implies that, starting from a root node, we can order all nodes in <em>tree shape</em>.</p>
</div>
<div class="paragraph">
<p>The opposite of a node&#8217;s parent are a node&#8217;s <em>children</em>.
In the example above, node <code>10</code> has children <code>5</code> and <code>11</code>; node <code>5</code> does not have any children.</p>
</div>
<div class="paragraph">
<p>A node&#8217;s classifier defines which kind of children a node can have&#8201;&#8212;&#8201;the node&#8217;s <a href="#containment">containments</a>.
In our example, node <code>5</code> might be contained in <code>engine</code>, and node <code>11</code> in <code>steering</code>&#8201;&#8212;&#8201;both defined in classifier <code>Car</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="carContainments.svg" alt="carContainments" width="340" height="155">
</div>
<div class="title">Containment example</div>
</div>
<div class="paragraph">
<p>Additionally, a node can have <a href="#annotation">annotation instances</a>.
Let&#8217;s add a node <code>22</code> of annotation <code>DiagramPosition</code> to our <code>10:Car</code>, and node <code>33</code> of annotation <code>ReviewComment</code> to <code>11:SteeringWheel</code>.
Thus, the parent of <code>22</code> is <code>10</code>, and the parent of <code>33</code> is <code>11</code>.
We also call this the <em>annotated node</em>: node <code>10</code> has annotation <code>22</code>, and node <code>22</code> has annotated node <code>10</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="carAnnotations.svg" alt="carAnnotations" width="644" height="158">
</div>
<div class="title">Annotation instances example</div>
</div>
<div class="paragraph">
<p>In summary, a node&#8217;s parent must always have a counterpart&#8201;&#8212;&#8201;either in the parent&#8217;s children, or in the parent&#8217;s annotation instances.</p>
</div>
<div class="paragraph">
<p>If we deleted the parent node, we implicitly deleted all its children and annotation instances, each of their children and annotation instances, and so on.
In other words, a child or annotation instance shares the lifetime of its parent.</p>
</div>
<div class="paragraph">
<p>This also explains why we consider the annotated node the parent of an annotation instance:
If the annotated node is gone, the annotation instance makes no sense anymore&#8201;&#8212;&#8201;they share the annotated node&#8217;s lifetime.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="title">Parent vs. Supertype</div>
<div class="paragraph">
<p>We might confuse the <em>parent of a node</em> with the <em>generalization of a <a href="#classifiers">classifier</a></em> (a.k.a. supertype, superclass, extended class, implemented interface).
They are completely independent of each other.</p>
</div>
<div class="paragraph">
<p><em>Parent</em> always refers to a node, i.e. instance / M1 level: node <code>A</code> is the parent of node <code>B</code>.</p>
</div>
<div class="paragraph">
<p><em>Generalization</em> always refers to a classifier, i.e. language / M2 level: concept <code>List</code> is the generalization of concept <code>LinkedList</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>We might have node <code>1:List</code> that contains node <code>2:List</code>: <code>1</code> is parent of <code>2</code>, but both are <code>List</code>s.</p>
</li>
<li>
<p>We might have node <code>3:LinkedList</code> that contains node <code>4:List</code>: <code>3</code> is parent of <code>4</code>, although <code>4</code>'s classifier is a generalization of <code>3</code>'s classifier.</p>
</li>
<li>
<p>We might have node <code>5:List</code> and another, unrelated, node <code>6:LinkedList</code>. <code>5</code> and <code>6</code> have no parent-relationship, but <code>5</code>'s classifier is a generalization of <code>6</code>'s classifier.</p>
</li>
<li>
<p>We might have node <code>7:List</code> that contains node <code>8:Person</code>: <code>7</code> is parent of <code>8</code>, but <code>7</code>'s classifier is completely unrelated to <code>8</code>'s classifier.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="properties">2.5. Properties</h3>
<div class="paragraph">
<p>We use properties to store simple values inside a node.
A node of classifier <code>Person</code> might have properties <code>name: String</code>, <code>age: Integer</code> and <code>alive: Boolean</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="personProperties.svg" alt="personProperties" width="181" height="109">
</div>
<div class="title">Person properties example</div>
</div>
<div class="paragraph">
<p>A node&#8217;s classifier describes which properties can appear in the node.
This description includes the property&#8217;s <em>name</em>, <em>key</em>, whether it is <em>optional</em>, and its <em>type</em>.
On low-level serialization, we use a <a href="#meta-pointer">meta-pointer</a> to refer to the description for each property value.</p>
</div>
<div class="paragraph">
<p>The property&#8217;s name is for humans to understand the property; we use the key to uniquely identify the property technically.
With the optional flag we specify whether a node without this property is considered valid or not:
In our system, a <code>person</code> without known <code>name</code> might be a problem, but we could still process them without knowing their <code>age</code>.</p>
</div>
<div class="paragraph">
<p>A property&#8217;s type describes what kind of values can appear in that property.
All LionWeb data types, and thus all properties, are <em>value types<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup></em>.
This means they don&#8217;t have any identity, we just know their value: We can distinguish <code>10</code> and <code>15</code>, but <code>12</code> and <code>12</code> are the same.</p>
</div>
<div class="paragraph">
<p>Some modeling frameworks allow properties with multiple values, e.g. <code>luckyNumbers: Integer[0..*] = {23, 42, 4711}</code>.
LionWeb does not support that, because the values don&#8217;t have identity.
So if we first had a property value of <code>{23, 42}</code>, and then <code>{23, 42, 42}</code>, we have no way of telling whether the new <code>42</code> has been inserted or appended.
This leads to all kinds of problems we&#8217;d like to avoid.</p>
</div>
<div class="paragraph">
<p>The following subsections describe the kinds of data types supported by LionWeb.</p>
</div>
<div class="sect3">
<h4 id="primitive-types">2.5.1. Primitive types</h4>
<div class="paragraph">
<p>LionWeb ships with <a href="#builtins">built-in types</a> for <code>String</code>, <code>Integer</code>, and <code>Boolean</code>, as they are needed in almost all systems.
String properties can have any string value, including empty.
Integer properties support positive and negative decimal integers of any length.
Boolean properties can only have the values <code>true</code> or <code>false</code>.
A language might define its own additional <em>primitive types</em>.
In any case, we store all of them as string in the low-level serialization format (i.e. JSON).</p>
</div>
</div>
<div class="sect3">
<h4 id="enumerations">2.5.2. Enumerations</h4>
<div class="paragraph">
<p>A property can also be of an <em>enumeration</em> type.
Enumerations have a <em>name</em>, <em>key</em>, and a list of <em>enumeration literals</em>.
Again, name is for human understanding, and key for unambiguous technical reference.
Each literal also has a <em>name</em> and a <em>key</em>, with the same purpose.
A language must explicitly declare an enumeration to use it as the type of a property.
Enumeration properties must have one of the enumeration literal values.
On low-level serialization, we store the value as the enumeration literal&#8217;s key.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="personEnum.svg" alt="personEnum" width="194" height="126">
</div>
<div class="title">Enumeration example</div>
</div>
</div>
<div class="sect3">
<h4 id="structured-data-types">2.5.3. Structured data types</h4>
<div class="paragraph">
<p>LionWeb supports another kind of simple type: <em>structured data type</em> (added in LionWeb version 2024.1).
They are a collection of other primitive types, called <em>fields</em>.
Both the structured data type and each field has a <em>name</em> and <em>key</em> with the usual meaning.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="sdtColor.svg" alt="sdtColor" width="467" height="115">
</div>
<div class="title">Structured data type example</div>
</div>
<div class="paragraph">
<p>We store the value of a structured data type as string, the same as all other primitive types.
The content of that string is a serialized and escaped JSON object.
As example, the value of above&#8217;s <code>TextPosition</code> would be <code>"{\"lin\": \"42\", \"col\": \"-30\"}"</code>.
Refer to <a href="../serialization/serialization.html#structuredDatatype">serialization specs</a> for details.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="containments">2.6. Containments</h3>
<div class="paragraph">
<p>A node <code>A</code> can contain other nodes <code>B</code> and <code>C</code>.
Then <code>B</code> has the <a href="#parent">parent</a> <code>A</code>; <code>A</code> has <em>children</em> <code>B</code> and <code>C</code>.
If <code>C</code> contains <code>D</code>, then <code>D</code> has the <em>ancestors</em> <code>C</code> and <code>A</code>; <code>A</code> has the <em>descendants</em> <code>B</code>, <code>C</code>, and <code>D</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="axis.svg" alt="axis" width="86" height="211">
</div>
<div class="title">Parent, children, ancestors, and descendants example</div>
</div>
<div class="paragraph">
<p>Every node (except root nodes) must have exactly one parent, thus no node can be contained more than once.
Containments establish a <em>tree shape</em> of the model (sometimes called <em>primary containment tree</em> or <em>dominator tree</em>).
A node can never contain itself, neither directly nor indirectly.</p>
</div>
<div class="paragraph">
<p>We use containments if the contained node only makes sense together with its parent&#8201;&#8212;&#8201;a <code>Coordinate</code> is not very useful if we don&#8217;t know which shape it belongs to.
We also identify different containments&#8201;&#8212;&#8201;for a <code>Rectangle</code>, we want to know whether a contained <code>Coordinate</code> is <code>topLeft</code> or <code>lowerRight</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="rectangle.svg" alt="rectangle" width="145" height="155">
</div>
<div class="title">Several containments example</div>
</div>
<div class="paragraph">
<p>A node&#8217;s classifier describes the valid containments.
This description includes the containments <em>name</em>, <em>key</em>, whether it is <em>optional</em>, whether we allow <em>multiple</em> nodes in the containment, and its <em>type</em>.
On low-level serialization, we use a <a href="#meta-pointer">meta-pointer</a> to refer to the description for each containment.</p>
</div>
<div class="paragraph">
<p>Name, key and optional flag mean the same for containments as for <a href="#properties">properties</a>.
Contrary to properties, a containment can be singular or multiple.
A singular containment (i.e. <code>multiple = false</code>) allows only one contained node, e.g. a <code>Rectangle</code> can contain only one <code>topLeft</code> coordinate.
In contrast, a <code>House</code> can contain multiple <code>Room</code>s.
For multiple containments, we keep track which child is contained at which position.
As every contained node can have only one parent, we cannot have duplicates in multiple containments.
Thus, multiple containments behave like an <em>ordered set</em>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="house.svg" alt="house" width="707" height="219">
</div>
<div class="title">Single (<code>address</code>) and multiple (<code>rooms</code>) containments example</div>
</div>
<div class="paragraph">
<p>A containment&#8217;s type refers to a classifier, and describes which nodes can be part of that containment.
Only nodes that have a compatible classifier can be part of that containment.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>All of interfaces, concepts, and annotations are classifiers.
Thus, a containment can specify its type to be <code>IMoveable</code> interface, <code>AbstractShape</code> (abstract) concept,
<code>Rectangle</code> (concrete) concept, or <code>Todo</code> annotation.</p>
</div>
<div class="paragraph">
<p>The latter is an edge case, but has its usages: We might want to annotate other nodes with todos specific to that node, but also have a list of general todos somewhere, unrelated to a specific node.
Moreover, we definitely want to allow both interface and concept as containment type; keeping annotation out of that would clutter LionWeb&#8217;s meta-metamodel.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>On serialization level, we store the contained node&#8217;s id for a containment.
A containment is invalid if the contained node&#8217;s id cannot be resolved.</p>
</div>
</div>
<div class="sect2">
<h3 id="references">2.7. References</h3>
<div class="paragraph">
<p>A node can point to other nodes it has some relation to.
For example, a <code>Project</code> might refer to its <code>mainResponsible: Employee</code>, or to all its <code>externalParties: BusinessPartner[0..*]</code>.
The node containing the reference is called <em>source</em>, the referred node is called <em>target</em> of the reference.
A node can be referenced by none, one, or many other nodes.
It can be referenced by itself.
A node can reference another node (or itself) more than once.
Thus, multiple references behave like a <em>list</em>.</p>
</div>
<div id="interstellar-project" class="imageblock">
<div class="content">
<img src="project.svg" alt="project" width="1106" height="219">
</div>
<div class="title">Interstellar projects example</div>
</div>
<div class="paragraph">
<p>A node&#8217;s classifier describes the valid references.
This description includes the references <em>name</em>, <em>key</em>, whether it is <em>optional</em>, whether we allow <em>multiple</em> targets in the reference, and its <em>type</em>.
On low-level serialization, we use a <a href="#meta-pointer">meta-pointer</a> to refer to the description for each reference.</p>
</div>
<div class="paragraph">
<p>The description means the same as for <a href="#containments">containments</a>, respectively.
For multiple references, we keep track which target is listed at which position.
The same target can appear several times in a multiple reference.
This can help, for example, to describe steps: <code>steps: Task[1..*] = {generate, saveAll, compile, saveAll}</code> refers to Task <code>saveAll</code> twice.</p>
</div>
<div class="paragraph">
<p>LionWeb does not support bidirectional references.
They are very hard to maintain, and also hard to process (i.e. if we want to traverse the whole model).</p>
</div>
<div class="sect3">
<h4 id="resolveInfo">2.7.1. ResolveInfo</h4>
<div class="paragraph">
<p>For references, we store the target node&#8217;s id, and additionally a <code>resolveInfo</code>.
ResolveInfo is a string that somehow describes the target node.
Typical candidate would be the target&#8217;s node <code>name</code> (if the target node had such a property).
To support this typical default behavior, LionWeb has a <a href="#builtins">built-in interface</a> <code>INamed</code> with one property <code>name: String</code> that might be implemented by any classifier.
However, it&#8217;s up to the application to select and set the appropriate resolveInfo.</p>
</div>
<div class="paragraph">
<p>This serves two purposes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <a href="#interstellar-project">interstellar project example above</a>, assume some app that displays the list of external parties for the project as <code>ESA: 23, JAXA: 42</code>.
Now someone thinks there&#8217;s no project left with ESA, and deletes node 87 (the ESA one).
If the <code>externalParties</code> reference only knew the target node id, the best possible display would be <code>!unknown target 87!, JAXA: 42</code>&#8201;&#8212;&#8201;not very helpful to the user.
With resolveInfo, we can display <code>!unknown target ESA!, JAXA: 42</code>.
Now the user has a much better chance of tracking down the error.</p>
</li>
<li>
<p>We need to know the target node id in order to store it in a reference.
But in parser-based systems, after parsing we know only some kind of identifier of a reference target.
We might want to store this unresolved <em>abstract syntax tree</em> (AST) as a LionWeb model.
A later linking step hopefully finds the actual target and fills in the proper target node id.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Target node id, resolveInfo, or both must be set for each reference&#8201;&#8212;&#8201;otherwise the reference is pointless.</p>
</div>
</div>
<div class="sect3">
<h4 id="_unresolved_references">2.7.2. Unresolved references</h4>
<div class="paragraph">
<p>Assume a node <code>T</code> that happens to be the target of a reference <code>myRef</code> from node <code>A</code>.
When we delete <code>T</code>, the reference stays untouched: <code>A</code> still contains a reference <code>myRef</code> with target node id <code>T</code> (and maybe some resolveInfo), but the target cannot be resolved.
LionWeb allows references with unresolvable target.
It&#8217;s up to the consumer of the model to do something about that target, though.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="deadRef.svg" alt="deadRef" width="326" height="104">
</div>
<div class="title">Unresolved references example</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_differences_between_containment_and_reference">2.8. Differences between containment and reference</h3>
<div class="paragraph">
<p>A contained node shares the lifetime of its parent&#8201;&#8212;&#8201;if the parent is deleted, the contained node gets deleted, too.
The contained node makes no sense without its parent.
Even if we kept the contained node, where would it go?
We&#8217;d need to invent some special place for it.
In contrast, the target of a reference is perfectly valid without the source.
They can be deleted independently, and don&#8217;t need to be deleted when sources pointing to them are deleted.</p>
</div>
<div class="paragraph">
<p>Containments establish a <em>tree shape</em> for the model.
With references, we regard the model as a <em>graph</em>, as a node can be target of several references.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="graph.svg" alt="graph" width="202" height="211">
</div>
<div class="title">Node graph example</div>
</div>
<div class="paragraph">
<p>For containments, the parent node only stores the child node&#8217;s id.
For references, the source node stores the target node&#8217;s id and/or resolveInfo.</p>
</div>
<div class="paragraph">
<p>LionWeb does not support unresolvable containments, but unresolvable references are allowed.</p>
</div>
</div>
<div class="sect2">
<h3 id="annotations">2.9. Annotation instances</h3>
<div class="paragraph">
<p>Annotation instances are mostly regular nodes, with two exceptions:
Their classifier must be an annotation, it cannot be a concept.
Also, the annotation instance must be mentioned in its parent&#8217;s annotation instance list, it cannot be mentioned in the parent&#8217;s containments.
Both these criteria are indirect; thus, when only looking at a node (without examining its classifier or parent), we cannot distinguish annotation instances from other nodes.
That&#8217;s by design: <em>everything</em> is a node, remember?</p>
</div>
<div class="imageblock">
<div class="content">
<img src="annotationsExample.svg" alt="annotationsExample" width="959" height="102">
</div>
<div class="title">Annotations examples</div>
</div>
<div class="paragraph">
<p>An annotation instance can have any kind and amount of properties, containments, references, and other annotation instances.
We can use annotation instances as reference target.</p>
</div>
<div class="paragraph">
<p>Assuming node <code>X</code> mentions node <code>Y</code> in <code>X</code>'s annotation instances, we say <code>X</code> is <em>annotated by</em> <code>Y</code>, and <code>Y</code> has <em>annotated node</em> <code>Y</code>.
<code>Y</code>'s annotated node is always also <code>Y</code>'s parent node.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="annotationInstance.svg" alt="annotationInstance" width="249" height="104">
</div>
<div class="title">Relations and terms between a node and its annotation instance</div>
</div>
<div class="paragraph">
<p>Annotation instances share the lifetime of their annotated node; when we delete the annotated node, the annotation instance gets also deleted.</p>
</div>
<div class="paragraph">
<p>We keep track of the order of annotation instances.
As every annotation instance can have only one parent, we cannot have duplicates in annotations.
Thus, annotation instances behave like an <em>ordered set</em>.</p>
</div>
<div class="sect3">
<h4 id="annotation-applicable-classifiers">2.9.1. Applicable classifiers</h4>
<div class="paragraph">
<p>The classifier of an annotation instance must be an annotation.
Annotations are similar to concepts, and both are classifiers.
But an annotation specifies which other classifier it <em>annotates</em>.
The instance of that annotation must adhere to this constraint.</p>
</div>
<div class="paragraph">
<p>As example, assume we have classifiers <code>Function</code> and <code>Argument</code>.
We also have an annotation <code>SourcePosition</code> that <code>annotates = Function</code>.
On M1, we have node <code>1</code> of <code>Function</code>, and node <code>3</code> of <code>Argument</code>.
With node <code>34</code>, we have an annotation instance of <code>SourcePosition</code>.
Node <code>1:Function</code> can be <em>annotated by</em> node <code>34:SourcePosition</code>, because <code>SourcePosition</code> states it <em>annotates</em> <code>Function</code>.
In contrast, node <code>3:Argument</code> cannot be <em>annotated by</em> node <code>35:SourcePosition</code>, because <code>Argument</code> is not compatible with <code>Function</code> (the kind of classifier <code>SourcePosition</code> <em>annotates</em>).</p>
</div>
<div id="invalid-annotation" class="imageblock">
<div class="content">
<img src="annotation.svg" alt="annotation" width="1008" height="357">
</div>
<div class="title">Valid (<code>34</code>) and invalid (<code>35</code>) annotation instances example</div>
</div>
<div class="paragraph">
<p>An annotation that is applicable to all concepts says it annotates <code>Node</code> from LionWeb&#8217;s <a href="#builtins">built-in library</a>.
Annotations can <em>annotate</em> other annotations; however, this approach introduces complexities and should be used with great caution.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_differences_between_containment_and_annotation_instances">2.10. Differences between containment and annotation instances</h3>
<div class="paragraph">
<p>Both a contained node <code>C</code> and an annotation instance <code>A</code> share the lifetime of their parent node <code>P</code>.
So what&#8217;s the difference?</p>
</div>
<div class="paragraph">
<p>A containment must be described in the parent&#8217;s node classifier.
If the parent is of classifier <code>House</code> with containments <code>rooms</code>, and <code>doors</code>, we (as users of that classifier) cannot add a containment <code>windows</code> to the parent node.
The designer of classifier <code>House</code> made the choice that for their domain, a house should only care about rooms and doors, but not windows.
The designer might not have anticipated our use case of their domain.
But every user of that classifier relies on this structure of a house, so we must not mess with it.</p>
</div>
<div class="paragraph">
<p>An annotation instance cannot be mentioned in the parent&#8217;s node classifier at all.
Instead, an annotation instance&#8217;s classifier must be an annotation, which mentions the classifier it annotates.
Thus, the designer of the annotation decides which targets their annotation is applicable to.
So we can come up with an annotation <code>WindowAnnotation</code> that <code>annotates: House</code>, and attach instances to nodes of classifier <code>House</code>.
All these nodes still adhere to the intents of <code>House</code>'s designer, but also transport the additional information about windows we need for our use case.</p>
</div>
<div class="paragraph">
<p>Even more importantly, we can put orthogonal concerns into annotation instances.
For the domain of our <a href="#invalid-annotation">functions with arguments</a>, we don&#8217;t want to bother with the details how a parser constructed that node.
But it would be useful to show users where this node originated from in case of errors.
Not a problem with an annotation <code>SourcePosition</code>.
Similarly, we could come up with an annotation <code>ReviewComment</code> that <code>annotates: Node</code> (i.e. any node), to be used during code reviews.
The reviewer can attach instances to any node, without interfering with the original intent of these nodes.</p>
</div>
<div class="paragraph">
<p>Review comments demonstrate one drawback of annotations: we&#8217;re violating the generally valued idea of <em>separating concerns</em>, as we mix domain concerns and process concerns in the same model.
The alternative would be to keep both concerns in separate models, and have the review comments reference the node they apply to.
Experience shows this approach is very hard to maintain:
What happens if we deleted a function, and there&#8217;s still a review comment referring to it?
The review model might not be loaded during the deletion, so it now contains a "zombie" review comment.
We might need to introduce "garbage collection" strategies to find such zombies and deal with them.
For more context-sensitive annotations, moving the annotated node might introduce similar problems:
The annotation instance might not make sense in the context of the annotated node&#8217;s new position.
As example, imagine an annotation <code>Profiling { cpuPercentage: Integer; annotates = Statement }</code>.
This annotation is not only meaningless, but actually wrong if the statement were moved somewhere else.</p>
</div>
<div class="paragraph">
<p>Annotations should not be used as replacement for proper concept design.
If our language dealt with the domain of houses, review comments are completely independent of that domain, should not be part of it, and are perfect candidates for annotations.
However, if our language was modeling discussions, then reviews and comments are integral part of that domain, and should be represented by proper containments and (abstract) concepts in our language.
In this case, using annotations only because they seem conveniently applicable at lots of places is a strong modeling smell.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="builtins">3. Built-in Library</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Every LionWeb implementation must ship with a built-in library.
This library contains our pre-defined <a href="#primitive-types">primitive types</a>, <code>Node</code> as the generalization of all concepts, and interface <code>INamed</code>.</p>
</div>
<div class="paragraph">
<p>Named things are so common in models that it warrants a special interface.
Implementations can offer default behavior for nodes of <code>INamed</code> type, e.g. use the name in tree displays, for issue reporting, or as default for <a href="#resolveInfo">resolveInfo</a> in reference targets.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="builtins.svg" alt="Diagram" width="459" height="202">
</div>
<div class="title">Built-in library</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_languages">4. Languages</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Programming languages like Java or C# natively know things like classes, records, and enums.
We can use them to describe the structures we care about in our program, e.g. <code>class Person</code>.
Then, we work with instances of these structures, e.g. <code>new Person("Joe")</code>.</p>
</div>
<div class="paragraph">
<p>LionWeb has the same three conceptual layers:
LionWeb natively knows e.g. concepts, data types, and enumerations; we call this "meta-metamodel" or <em>M3</em>.
With them, we can describe e.g. <code>concept Person</code>; this would be part of a "Language" or <em>M2</em>.
Then, we work with instances, aka nodes, e.g. <code>node&lt;23:Person&gt; { name: String = "Joe" }</code> as part of <em>M1</em>.</p>
</div>
<div class="paragraph">
<p>This section describes our meta-metamodel.
We&#8217;ve already explained some aspects in the <a href="#nodes">nodes</a> section; we won&#8217;t duplicate that here.</p>
</div>
<div class="paragraph">
<p>Our meta-metamodel closely resembles other meta-metamodels like EMF Ecore, MPS structure aspect, Java, C#, TypeScript, etc.
This is a very deliberate choice: We want to be as compatible as possible.
Also, several decades of usage shows they <em>just work</em>&#8201;&#8212;&#8201;we don&#8217;t want to reinvent the wheel, or be different <em>because</em>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="metametamodel.svg" alt="Diagram" width="1048" height="962">
</div>
<div class="title">LionWeb meta-metamodel. Green boxes relate to <em>classifiers</em>; blue boxes to <em>features</em>, and red boxes to <em>data types</em>.</div>
</div>
<div class="paragraph">
<p>A <em>language</em> groups related <em>classifiers</em> and <em>data types</em> (summarized as <em>language entities</em>).
For example, we might design a language to describe houses, or cars.
We&#8217;ve already covered a language&#8217;s <em>version</em> in the <a href="#meta-pointer">meta-pointer</a> section.
It also explains <em>keys</em>, used to uniquely identify everything inside a language.</p>
</div>
<div class="sect2">
<h3 id="classifiers">4.1. Classifiers</h3>
<div class="paragraph">
<p>Classifiers define the nature / type / class of a node.
LionWeb knows three kinds of <em>classifiers</em>: <em>concepts</em>, <em>annotations</em>, and <em>interfaces</em>.
Every classifier can define an arbitrary number of <a href="#features">features</a>.</p>
</div>
<div class="paragraph">
<p>All classifiers support <em>inheritance</em>, meaning that a classifier "inherits" all features defined by its direct or indirect <em>generalizations</em>.
A generalization, (a.k.a. supertype, superclass, extended class, implemented interface) is the opposite of <em>specialization</em> (a.k.a. subtype, subclass, interface implementations, "is a").
A classifier <code>A</code> is <em>compatible</em> to a classifier <code>B</code> if <code>A</code> is a (direct or indirect) specialization of <code>B</code> or, looking at the same fact from the other direction: <code>B</code> is a (direct or indirect) generalization of <code>A</code>.
Every classifier implicitly or explicitly specializes <code>Node</code> from LionWeb&#8217;s <a href="#builtins">built-in library</a>.</p>
</div>
<div class="paragraph">
<p>Concepts are equivalent to classes in object-orientation.
They can <em>extend</em> one other concept, and <em>implement</em> any number of interfaces.
An <em>abstract</em> concept can never be instantiated, i.e. there cannot be a node with that classifier.
An abstract concept can extend a <em>concrete</em> (i.e. <code>abstract=false</code>) concept, and vice versa.
Concepts marked as <em>partition</em> can only appear as root nodes in a model (i.e. not have a parent).</p>
</div>
<div class="paragraph">
<p>Annotations are similar to concepts: They can <em>extend</em> one other annotation and <em>implement</em> interfaces.
They are always concrete, and cannot be used as partition.
Additionally, annotations describe which classifiers they are <a href="#annotation-applicable-classifiers">applicable to</a>.</p>
</div>
<div class="paragraph">
<p>Interfaces can <em>extend</em> any number of other interfaces.
They are always abstract, thus can never be instantiated.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="title">Single vs. multiple inheritance</div>
<div class="paragraph">
<p>Concepts and annotations support <em>single inheritance</em>, interfaces <em>multiple inheritance</em>.
This is in line with most modern programming languages.
However, programming languages do this to avoid the <a href="https://en.wikipedia.org/wiki/Multiple_inheritance#The_diamond_problem">diamond inheritance problem</a>.
We don&#8217;t have this problem in LionWeb, as we don&#8217;t have behavior.</p>
</div>
<div class="paragraph">
<p>This begs the question: What&#8217;s the difference between an abstract concept and an interface?
The answer: Not much.
So we could just abandon interfaces completely, allow multiple inheritance for concepts, and be done, right?
Yes, that would work.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/LionWeb-io/specification/issues/104">Issue 104</a> lists all the gory details of our discussion on this topic.
The gist: We couldn&#8217;t find strong arguments in either direction.
It mostly comes down to compatibility with other systems, which in turn boils down to <em>who does the work</em>:
if we allowed multiple inheritance, converters to similar systems like EMF or C&#43;&#43; would be simple, but converters to single inheritance systems like MPS, Java or C# would need to spend lots of effort on mapping.
The same applies with disallowing multiple inheritance: MPS, Java or C# converters are simple, but EMF or C&#43;&#43; become trickier.
We took the latter direction more or less arbitrarily so we can move on.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="features">4.2. Features</h3>
<div class="paragraph">
<p>Features are the possible contents of a <a href="#classifiers">classifier</a>.
LionWeb supports three kinds of <em>features</em>: <a href="#properties">properties</a> are simple values, <a href="#containments">containments</a> describe other nodes with shared lifetime, and <a href="#references">references</a> point to other nodes.
We summarize the latter two as <em>links</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_data_types">4.3. Data types</h3>
<div class="paragraph">
<p>Data types describe the possible values of a <a href="#properties">property</a>.
LionWeb supports three kinds of <em>data types</em>: <a href="#primitive-types">primitive types</a> with no further specified structure, <a href="#enumerations">enumerations</a> with a finite, pre-defined, non-extensible list of possible values, and <a href="#structured-data-types">structured data types</a> as combination of other data types.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="notation">Appendix A: Notation used in this article and diagrams</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We use integer numbers as node ids, and short names for keys of language elements.
We label boxes in diagrams that represent M1-level nodes with the node id and its classifier, as in <code>10:Person</code>.
Boxes in diagrams for M2-level language elements are labelled only with the classifier, i.e. <code>Person</code>.
Boxes that represent concepts or concept instances use <code>C</code> icon, and <code>@</code> icon for annotation (instance) boxes.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="language-key">Appendix B: Language key</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We might ask, "What&#8217;s the difference between a language id and its key? Everything is a node, thus a language is a node, so it must have a unique id&#8201;&#8212;&#8201;that should be enough?!"</p>
</div>
<div class="paragraph">
<p>A language is indeed a node.
However, languages tend to be interchanged between different systems.
If we exported the language from system <code>A</code>, and imported it in system <code>B</code>, the node id assigned by <code>A</code> might already be taken in <code>B</code>&#8201;&#8212;&#8201;so we need to assign a new one.
Later, we might transfer instances of that language from <code>A</code> to <code>B</code>.
The instances would use the language&#8217;s original id in their meta-pointer.
So we had to store mapping tables from the language import, and apply them every time we import an instance&#8201;&#8212;&#8201;not very appealing.</p>
</div>
<div class="paragraph">
<p>Another problem arose if we had a language in several versions.
Different versions of the same language are represented by different nodes&#8201;&#8212;&#8201;otherwise they would not be different.
Then the same language in different versions would have different ids.
Let&#8217;s assume the language contains three concepts, and only one of them changed from version 1 to 2.
We still must have new (albeit semantically identical) nodes for the other two concepts in version 2, as a concept cannot be part of two versions of a language.
Thus, all three concepts of version 2 must have different node ids from the corresponding concepts in version 1.
Then, if we migrated an instance of that language from version 1 to 2, we had to change <em>all</em> meta-pointers&#8201;&#8212;&#8201;again, not very appealing.</p>
</div>
<div class="paragraph">
<p>Having a key for both languages and all their elements solves all of these problems: The key stays the same in different systems, and through different versions.</p>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. At least by default; we might deviate from that constraint under special circumstances, like migrations.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. <a href="https://en.wikipedia.org/w/index.php?title=Value_type" class="bare">https://en.wikipedia.org/w/index.php?title=Value_type</a>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2026-02-20 14:57:01 UTC
</div>
</div>
</body>
</html>