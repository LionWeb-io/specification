[[cmd-MoveAndReplaceChildInSameContainment]]
===== Move child in same containment and replace existing child
Move existing node <<MoveAndReplaceChildInSameContainment.movedChild>> within its current containment to <<MoveAndReplaceChildInSameContainment.newIndex>>.
Delete current child <<MoveAndReplaceChildInSameContainment.replacedChild>>{fn-org371} inside the same containment at <<MoveAndReplaceChildInSameContainment.newIndex>>, and all its descendants (including annotation instances).
Does NOT change references to any of the deleted nodes.{fn-org285}

[cols="a,a"]
|===
|Before |After

include::MoveAndReplaceChildInSameContainment-diagram.adoc[]
|===

.Technical name
`MoveAndReplaceChildInSameContainment`

[horizontal]
.Parameters
[[MoveAndReplaceChildInSameContainment.newIndex, `newIndex`]]newIndex:: <<indexType>>

[[MoveAndReplaceChildInSameContainment.replacedChild, `replacedChild`]]replacedChild:: <<targetNodeType>>

[[MoveAndReplaceChildInSameContainment.movedChild, `movedChild`]]movedChild:: <<targetNodeType>>

[[MoveAndReplaceChildInSameContainment.commandId]]commandId:: <<commandIdType>>

[[MoveAndReplaceChildInSameContainment.protocolMessages]]protocolMessages:: <<protocolMessagesType>>

.Errors
* <<err-unknownIndex>> for <<MoveAndReplaceChildInSameContainment.newIndex>> (is beyond (the number of `<<MoveAndReplaceChildInSameContainment.movedChild>>'s containment entries in <<MoveAndReplaceChildInSameContainment.movedChild>>'s parent) - 2)
* <<err-unknownNode>> for <<MoveAndReplaceChildInSameContainment.movedChild>>
* <<err-moveWithoutParent>> for <<MoveAndReplaceChildInSameContainment.movedChild>>
* <<err-invalidMove>> as <<MoveAndReplaceChildInSameContainment.movedChild>> is already at <<MoveAndReplaceChildInSameContainment.newIndex>>
* <<err-indexEntryMismatch>> for <<MoveAndReplaceChildInSameContainment.newIndex>> and <<MoveAndReplaceChildInSameContainment.replacedChild>>
* <<err-invalidParticipation>>

.Related event
<<evnt-ChildMovedAndReplacedInSameContainment>>
