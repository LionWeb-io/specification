[[cmd-AddReferenceTarget]]
===== Add reference target
Add <<AddReferenceTarget.newTarget>> as target to existing entry inside <<AddReferenceTarget.parent>>'s <<AddReferenceTarget.reference>> at <<AddReferenceTarget.index>>.

[cols="a,a"]
|===
|Before |After

include::AddReferenceTarget-diagram.adoc[]
|===

****
Current ResolveInfo MUST NOT be `null` as we can only add target if target is `null`, and at least one of target and ResolveInfo MUST always be non-`null`.
****

.Technical name
`AddReferenceTarget`

[horizontal]
.Parameters
[[AddReferenceTarget.parent, `parent`]]parent:: <<targetNodeType>>

[[AddReferenceTarget.reference, `reference`]]reference:: <<metaPointerType>>

[[AddReferenceTarget.index, `index`]]index:: <<indexType>>

[[AddReferenceTarget.newTarget, `newTarget`]]newTarget:: <<targetNodeType>>

[[AddReferenceTarget.commandId]]commandId:: <<commandIdType>>

[[AddReferenceTarget.protocolMessages]]protocolMessages:: <<protocolMessagesType>>

.Errors
* <<err-unknownNode>> for <<AddReferenceTarget.parent>>
* <<err-unknownIndex>> for <<AddReferenceTarget.index>> (is beyond (the number of <<AddReferenceTarget.reference>> entries of <<AddReferenceTarget.parent>>) - 1)
* <<err-undefinedReferenceTarget>> for <<AddReferenceTarget.newTarget>>
* ##?## target already set in <<AddReferenceTarget.parent>>'s <<AddReferenceTarget.reference>> at <<AddReferenceTarget.index>>.
* <<err-invalidParticipation>>

.Related event
<<evnt-ReferenceTargetAdded>>
