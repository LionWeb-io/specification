[[cmd-MoveAndReplaceAnnotationInSameParent]]
===== Move annotation in same parent and replace existing annotation
Move <<existing-nodes, existing node>> <<MoveAndReplaceAnnotationInSameParent.movedAnnotation>> within the same parent to <<MoveAndReplaceAnnotationInSameParent.newIndex>>.
Delete <<existing-nodes, current node>> <<MoveAndReplaceAnnotationInSameParent.replacedAnnotation>>{fn-org371} at <<MoveAndReplaceAnnotationInSameParent.movedAnnotation>>'s parent's annotations at <<MoveAndReplaceAnnotationInSameParent.newIndex>>, and all its descendants (including annotation instances).
Does NOT change references to any of the deleted nodes.{fn-org285}

[cols="a,a"]
|===
|Before |After

include::MoveAndReplaceAnnotationInSameParent-diagram.adoc[]
|===

.Technical name
`MoveAndReplaceAnnotationInSameParent`

[horizontal]
.Parameters
[[MoveAndReplaceAnnotationInSameParent.newIndex, `newIndex`]]newIndex:: <<indexType>>

[[MoveAndReplaceAnnotationInSameParent.replacedAnnotation, `replacedAnnotation`]]replacedAnnotation:: <<targetNodeType>>

[[MoveAndReplaceAnnotationInSameParent.movedAnnotation, `movedAnnotation`]]movedAnnotation:: <<targetNodeType>>

[[MoveAndReplaceAnnotationInSameParent.commandId]]commandId:: <<commandIdType>>

[[MoveAndReplaceAnnotationInSameParent.additionalInfos]]additionalInfos:: <<additionalInfosType>>

.Errors
* <<err-unknownIndex>> for <<MoveAndReplaceAnnotationInSameParent.newIndex>> (is beyond (the number of annotations of <<MoveAndReplaceAnnotationInSameParent.movedAnnotation>>'s parent) - 1)
* <<err-unknownNode>> for <<MoveAndReplaceAnnotationInSameParent.movedAnnotation>>
* <<err-moveWithoutParent>> for <<MoveAndReplaceAnnotationInSameParent.movedAnnotation>>
* <<err-indexEntryMismatch>> for <<MoveAndReplaceAnnotationInSameParent.newIndex>> and <<MoveAndReplaceAnnotationInSameParent.replacedAnnotation>>
* <<err-invalidParticipation>>

.Related event
<<evnt-AnnotationMovedAndReplacedInSameParent>>
