[[cmd-ReplaceAnnotation]]
===== Replace annotation
Delete <<existing-nodes, current node>> <<ReplaceAnnotation.replacedAnnotation>>{fn-org371} at <<ReplaceAnnotation.parent>>'s annotations at <<ReplaceAnnotation.index>>, and all its descendants (including annotation instances).
Does NOT change references to any of the deleted nodes.{fn-org285}

Replace <<existing-nodes, existing node>> <<ReplaceAnnotation.replacedAnnotation>> inside <<ReplaceAnnotation.parent>>'s annotations at <<ReplaceAnnotation.index>> with <<new-nodes, new>> or <<reused-nodes, reused>> node <<ReplaceAnnotation.newAnnotation>>.

[cols="a,a"]
|===
|Before |After

include::ReplaceAnnotation-diagram.adoc[]
|===

.Technical name
`ReplaceAnnotation`

[horizontal]
.Parameters
[[ReplaceAnnotation.newAnnotation, `newAnnotation`]]newAnnotation:: <<chunkType>>

[[ReplaceAnnotation.parent, `parent`]]parent:: <<targetNodeType>>

[[ReplaceAnnotation.index, `index`]]index:: <<indexType>>

[[ReplaceAnnotation.replacedAnnotation, `replacedAnnotation`]]replacedAnnotation:: <<targetNodeType>>

[[ReplaceAnnotation.commandId]]commandId:: <<commandIdType>>

[[ReplaceAnnotation.additionalInfos]]additionalInfos:: <<additionalInfosType>>

.Errors
* <<err-nodeAlreadyExists>> for <<ReplaceAnnotation.newAnnotation>>
* <<err-unknownNode>> for <<ReplaceAnnotation.parent>>
* <<err-unknownIndex>> for <<ReplaceAnnotation.index>> (is beyond (the number of annotations of <<ReplaceAnnotation.parent>>) - 1)
* <<err-indexEntryMismatch>> for <<ReplaceAnnotation.index>> and <<ReplaceAnnotation.replacedAnnotation>>
* <<err-invalidParticipation>>

.Related event
<<evnt-AnnotationReplaced>>
