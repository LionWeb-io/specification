[[cmd-AddAnnotation]]
===== Add annotation
Add <<new-nodes, new node>> <<AddAnnotation.newAnnotation>> to <<AddAnnotation.parent>>'s annotations at <<AddAnnotation.index>>.

[cols="a,a"]
|===
|Before |After

include::AddAnnotation-diagram.adoc[]
|===

.Technical name
`AddAnnotation`

[horizontal]
.Parameters
[[AddAnnotation.parent, `parent`]]parent:: <<targetNodeType>>

[[AddAnnotation.newAnnotation, `newAnnotation`]]newAnnotation:: <<singleChunkType>>
Subtree to form a new annotation.
The _anchor node_ MUST contain the <<AddAnnotation.parent>> as _parent_.{fn-org357}
All nodes in that subtree MUST be <<new-nodes>>.

[[AddAnnotation.index, `index`]]index:: <<indexType>>

[[AddAnnotation.split, `split`]]split?:: <<splitFlagType>>

[[AddAnnotation.commandId]]commandId:: <<commandIdType>>

[[AddAnnotation.additionalInfos]]additionalInfos:: <<additionalInfosType>>

.Errors
* <<err-unknownNode>> for <<AddAnnotation.parent>>
* <<err-nodeAlreadyExists>> for <<AddAnnotation.newAnnotation>>
* <<err-unknownIndex>> for <<AddAnnotation.index>> (is beyond the number of annotations of <<AddAnnotation.parent>>)
* <<err-invalidParticipation>>

.Related event
<<evnt-AnnotationAdded>>
