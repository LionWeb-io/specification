[[cmd-MoveAndReplaceAnnotationFromOtherParent]]
===== Move annotation from other parent and replace existing annotation
Move existing node <<MoveAndReplaceAnnotationFromOtherParent.movedAnnotation>> inside <<MoveAndReplaceAnnotationFromOtherParent.newParent>>'s annotations at <<MoveAndReplaceAnnotationFromOtherParent.newIndex>>.
Delete current node <<MoveAndReplaceAnnotationFromOtherParent.replacedAnnotation>>{fn-org371} at <<MoveAndReplaceAnnotationFromOtherParent.newParent>>'s annotations at <<MoveAndReplaceAnnotationFromOtherParent.newIndex>>, and all its descendants (including annotation instances).
Does NOT change references to any of the deleted nodes.{fn-org285}

[cols="a,a"]
|===
|Before |After

include::MoveAndReplaceAnnotationFromOtherParent-diagram.adoc[]
|===

.Technical name
`MoveAndReplaceAnnotationFromOtherParent`

[horizontal]
.Parameters
[[MoveAndReplaceAnnotationFromOtherParent.newParent, `newParent`]]newParent:: <<targetNodeType>>

[[MoveAndReplaceAnnotationFromOtherParent.newIndex, `newIndex`]]newIndex:: <<indexType>>

[[MoveAndReplaceAnnotationFromOtherParent.replacedAnnotation, `replacedAnnotation`]]replacedAnnotation:: <<targetNodeType>>

[[MoveAndReplaceAnnotationFromOtherParent.movedAnnotation, `movedAnnotation`]]movedAnnotation:: <<targetNodeType>>

[[MoveAndReplaceAnnotationFromOtherParent.commandId]]commandId:: <<commandIdType>>

[[MoveAndReplaceAnnotationFromOtherParent.protocolMessages]]protocolMessages:: <<protocolMessagesType>>

.Errors
* <<err-unknownNode>> for <<MoveAndReplaceAnnotationFromOtherParent.newParent>>
* <<err-unknownIndex>> for <<MoveAndReplaceAnnotationFromOtherParent.newIndex>> (is beyond the number of annotations of <<MoveAndReplaceAnnotationFromOtherParent.newParent>>)
* <<err-unknownNode>> for <<MoveAndReplaceAnnotationFromOtherParent.movedAnnotation>>
* <<err-indexEntryMismatch>> for <<MoveAndReplaceAnnotationFromOtherParent.newIndex>> and <<MoveAndReplaceAnnotationFromOtherParent.replacedAnnotation>>
* ##?## <<MoveAndReplaceAnnotationFromOtherParent.movedAnnotation>> is already an annotation of <<MoveAndReplaceAnnotationFromOtherParent.newParent>>
* <<err-invalidParticipation>>

.Related event
<<evnt-AnnotationMovedAndReplacedFromOtherParent>>
